{"version":3,"file":"install.mjs","sources":["../src/install.ts"],"sourcesContent":["import { ShaderSystem, unsafeEvalSupported, utils } from 'pixijs/core';\nimport { syncUniforms } from './syncUniforms';\n\nimport type { Program, UniformGroup } from 'pixijs/core';\n\ninterface PIXICore\n{\n    ShaderSystem: typeof ShaderSystem;\n}\n\n/**\n * Apply the no `new Function` patch to ShaderSystem in `pixijs/core`.\n * `pixijs/unsafe-eval` is self-installed since 7.1.0, so this function no longer needs to be called manually.\n * @param _core\n * @deprecated since 7.1.0\n */\nexport function install(_core: PIXICore): void\n{\n    // #if _DEBUG\n    utils.deprecation('7.1.0', 'install() has been deprecated, pixijs/unsafe-eval is self-installed since 7.1.0');\n    // #endif\n}\n\n/**\n * Apply the no `new Function` patch to ShaderSystem in `pixijs/core`.\n * @private\n * @since 7.1.0\n */\nfunction selfInstall(): void\n{\n    if (unsafeEvalSupported()) return;\n\n    Object.assign(ShaderSystem.prototype,\n        {\n            systemCheck()\n            {\n                // Do nothing, don't throw error\n            },\n            syncUniforms(group: UniformGroup, glProgram: Program)\n            {\n                const { shader, renderer } = (this as any);\n\n                syncUniforms(\n                    group,\n                    shader.program.uniformData,\n                    glProgram.uniformData,\n                    group.uniforms,\n                    renderer\n                );\n            },\n        }\n    );\n}\n\nselfInstall();\n"],"names":[],"mappings":";;;AAgBO,SAAA,OAAA,CAAiB,KACxB,EAAA;AAEI,EAAM,KAAA,CAAA,WAAA,CAAY,SAAS,gFAAgF,CAAA,CAAA;AAE/G,CAAA;AAOA,SACA,WAAA,GAAA;AACI,EAAA,IAAI,mBAAoB,EAAA;AAAG,IAAA,OAAA;AAE3B,EAAO,MAAA,CAAA,MAAA,CAAO,aAAa,SACvB,EAAA;AAAA,IACI,WACA,GAAA;AAAA,KAEA;AAAA,IACA,YAAA,CAAa,OAAqB,SAClC,EAAA;AACI,MAAM,MAAA,EAAE,QAAQ,QAAc,EAAA,GAAA,IAAA,CAAA;AAE9B,MACI,YAAA,CAAA,KAAA,EACA,OAAO,OAAQ,CAAA,WAAA,EACf,UAAU,WACV,EAAA,KAAA,CAAM,UACN,QACJ,CAAA,CAAA;AAAA,KACJ;AAAA,GAER,CAAA,CAAA;AACJ,CAAA;AAEA,WAAY,EAAA;;;;"}